<?xml version="1.0"?>
<!--Dibs Selector view... Selects user to edit or report view -->
<html xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
>
<h:head>
    <title>Dibs Selection and Display</title>
</h:head>
<h:body>
    <h:panelGrid columns="1">
        <h:messages/>
        <h:panelGroup>
            <h:form id="form1">
                <h:panelGrid columns="1">
                    <f:facet name="header">
                DIBS Selection and Display
                </f:facet>
                    <h:outputLabel for="selectPerson"
                        value="Staff member"
                    />
                    <h:selectOneMenu id="selectPerson"
                        value="#{selectorBean.selectPerson}"
                        onchange="document.form1.submit()"
                    >
                        <f:selectItems
                            value="#{selectorBean.personList}"
                        />
                        <a4j:ajax execute="@this"
                            listener="#{selectorBean.doDibs}"
                        />
                    </h:selectOneMenu>
                    <h:commandButton id="selStaff" action="#{selectorBean.doDibs}" value="Edit Dibs"/>
                </h:panelGrid>
            </h:form>
            <h:form id="form2">
                <h:panelGrid columns="1">
                    <f:facet name="header">
                DIBS Display
                </f:facet>
                    <h:commandButton id="goReport"
                        action="report"
                        value="Dibs Report"
                    />
                </h:panelGrid>
    
            <rich:fileUpload fileUploadListener="#{selectorBean.listener}"
                addLabel="Import Data..." title="Import Data"
                clearAllLabel="Deselect File"
                id="ctlFileUpload" acceptedTypes="yml, yaml"
                listHeight="40"
                ontyperejected="alert('Only YAML files are accepted');" maxFilesQuantity="1">
                <a4j:ajax event="uploadcomplete" execute="@none" render="selectPerson" />
            </rich:fileUpload>
            </h:form>
        </h:panelGroup>
    </h:panelGrid>
</h:body>
</html>